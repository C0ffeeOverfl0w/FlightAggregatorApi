# ‚úàÔ∏è Flight Aggregator API

**Flight Aggregator API** ‚Äî —ç—Ç–æ RESTful-—Å–µ—Ä–≤–∏—Å, –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–≤–∏–∞–ø–µ—Ä–µ–ª—ë—Ç–∞—Ö –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π:

- –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–º–µ–Ω—É —Ä–µ–π—Å–æ–≤
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ JWT
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–π—Å–æ–≤ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤\
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ, —Ü–µ–Ω–µ, –ø–µ—Ä–µ—Å–∞–¥–∫–∞–º, –∞–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏–∏\
‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ –∏ –¥–∞—Ç–µ\
‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤\
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ\
‚úÖ JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ Swagger –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\
‚úÖ –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã\
---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
FlightAggregator
‚îÇ
‚îú‚îÄ‚îÄ Api                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, middleware, swagger
‚îú‚îÄ‚îÄ Application            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, use cases, –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Domain                 # Value objects, —Å—É—â–Ω–æ—Å—Ç–∏, –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ Infrastructure         # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º (–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –±–∞–∑—ã, –∫—ç—à, –ª–æ–≥–≥–µ—Ä—ã)
‚îî‚îÄ‚îÄ Tests                  # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JWT (JSON Web Token)
- Swagger UI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é login –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `POST /api/Auth/login`
- –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`

---

## üì¶ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### üîç –ü–æ–∏—Å–∫ —Ä–µ–π—Å–æ–≤

```
GET /api/Flight?origin=–ú–æ—Å–∫–≤–∞&destination=–ü–∏—Ç–µ—Ä&departureTime=2025-06-01
```

### ‚úâÔ∏è –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```
POST /api/Auth/login
{
  "email": "user@example.com"
}
```

### üìå –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```
POST /api/Booking
{
  "flightNumber": "AB123",
  "passengerName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "passengerEmail": "ivan@email.com"
}
```

### ‚ùå –û—Ç–º–µ–Ω–∞

```
DELETE /api/Booking/{bookingId}
```

---

## üß™ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
dotnet restore
dotnet run --project src/FlightAggregator.Api
```

–õ–∏–±–æ —á–µ—Ä–µ–∑ Docker:

```bash
docker build -t flight-aggregator .
docker run -p 5000:80 flight-aggregator
```

---

## ‚òÅÔ∏è –î–µ–ø–ª–æ–π –≤ –æ–±–ª–∞–∫–µ

–î–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Ä–µ–π—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ API, —Ä–∞–∑–º–µ—â—ë–Ω–Ω—ã–µ –Ω–∞ [Wiremock Cloud](https://wiremock.cloud).

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Render:
[üåê Swagger UI (–µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç)](https://flight-aggregator.onrender.com/swagger)

> –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- `Jwt__Key`
- `Jwt__Issuer`
- `Jwt__Audience`

---

## üß™ –¢–µ—Å—Ç—ã

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `FakeFlightProviderA` (—Å —Ä–µ—Ç—Ä–∞—è–º–∏)
- –¢–µ—Å—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–≤—ã–¥–∞—á–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT)

–ó–∞–ø—É—Å–∫:

```bash
dotnet test
```

---

## üåê –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Frontend –Ω–∞ React)

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ **React** –∏ **TypeScript**:

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–π—Å–æ–≤, –∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
- –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–π—Å–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–π—Å–æ–≤
- –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT —á–µ—Ä–µ–∑ e-mail
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º API –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

[üåê –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é](https://flight-aggregator.vercel.app/)

---

## üõ†Ô∏è –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –ø–æ–¥—Ö–æ–¥—ã

- **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî —á–µ—Ä–µ–∑ `FluentValidation` + pipeline-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `ValidationBehavior` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ JWT-—Ç–æ–∫–µ–Ω–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤ Swagger.
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–ª–≥–∏—Ö –∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Polly` (retry –∏ circuit breaker –ø–æ–ª–∏—Ç–∏–∫–∏).
- **CQRS + MediatR** ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö handler'–∞—Ö.
- **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `CombinedFlightProvider`, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** ‚Äî –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã `IFlightFilterService` –∏ `IFlightSortService`, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å.
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚Äî middleware `GlobalExceptionMiddleware`.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `MemoryCache` —Å –æ–±—ë—Ä—Ç–∫–æ–π –Ω–∞–¥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Å –ø–æ–º–æ—â—å—é `Serilog`, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π RequestId.

## üôå –ê–≤—Ç–æ—Ä—ã

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é .NET Developer.\
–ö–æ–Ω—Ç–∞–∫—Ç: gospodinkorolev\@gmail.com

